(function(b){var c={};function a(e,d){d.html('<div class="plupload_single" id="'+e+'_browse"><div class="plupload_container"><input type="text" class="plupload_file_name" value="" /><input type="button" class="plupload_browse" value="Browse&hellip;" /><span class="plupload_status"></span></div></div>')}b.fn.pluploadSingle=function(d){if(d){this.each(function(){var f,e,g;f=new plupload.Uploader(d);e=b(this);g=e.attr("id");if(!g){g=plupload.guid();e.attr("id",g)}f.settings.browse_button=g+"_browse";f.settings.multi_selection=false;c[g]=f;f.bind("PreInit",function(){a(g,e);b(".plupload_file_name,.plupload_browse",e).click(function(h){f.browse();h.preventDefault()});if(f.settings.unique_names){f.bind("UploadFile",function(h,i){i.target_name=(f.settings.salt||"")+i.id+".tmp"})}f.bind("QueueChanged",function(h){var i;if(h.files.length){i=h.files[h.files.length-1];b(".plupload_file_name",e).val(i.name).attr("disabled","disabled");b(".plupload_status",e).html("Size: "+plupload.formatSize(i.size));b(".plupload_browse",e).attr("disabled","disabled");h.start()}});f.bind("UploadProgress",function(h,i){if(i.status==plupload.DONE){b(".plupload_status",e).html("File uploaded.")}else{b(".plupload_status",e).html("Uploading: "+i.percent+"%")}});f.bind("FileUploaded",function(h,i){if(i.status==plupload.DONE){if(i.target_name){e.append('<input type="hidden" name="'+g+'_tmpname" value="'+plupload.xmlEncode(i.target_name)+'" />')}e.append('<input type="hidden" name="'+g+'_name" value="'+plupload.xmlEncode(i.name)+'" />')}else{b(".plupload_file_name,.plupload_browse",e).attr("disabled","")}})});f.init()});return this}else{return c[b(this[0]).attr("id")]}}})(jQuery);